{% extends 'base.html' %}
{% load static i18n %}
{% block extra_js %}
    {{ block.super }}
    <script src="{% static 'tom_select.js' %}" type="module" defer></script>
{% endblock extra_js %}
{% block title %}
    Create/Edit Wine
{% endblock title %}
{% block header %}
    <h1 class="header__title">{% translate "Add Wine" %}</h1>
{% endblock header %}
{% block content %}
    <div class="pure-g">
        <div class="pure-u-1 pure-u-lg-1-3 m-auto">
            <form method="post"
                  enctype="multipart/form-data"
                  class="pure-form pure-form-stacked wine-form"
                  novalidate>
                {% csrf_token %}
                {% with step=form.form_step.value|add:"0" %}
                    <fieldset id="create__fs_0" class="{% if step != 0 %}hidden{% endif %}">
                        <legend>
                            <h2 class="form-subhead text-color-gray">{% translate "Details" %}</h2>
                        </legend>
                        {% include 'forms/form_field.html' with field=form.name %}
                        {% include 'forms/form_field.html' with field=form.wine_type %}
                        {% include 'forms/form_field.html' with field=form.country %}
                        {% include 'forms/form_field.html' with field=form.size %}
                    </fieldset>
                    <fieldset id="create__fs_1" class="{% if step != 1 %}hidden{% endif %}">
                        <legend>
                            <h2 class="form-subhead text-color-gray">{% translate "Characteristics" %}</h2>
                        </legend>
                        {% include 'forms/form_field.html' with field=form.grapes %}
                        {% include 'forms/form_field.html' with field=form.vintage %}
                        {% include 'forms/form_field.html' with field=form.abv %}
                        {% include 'forms/form_field.html' with field=form.category %}
                    </fieldset>
                    <fieldset id="create__fs_2" class="{% if step != 2 %}hidden{% endif %}">
                        <legend>
                            <h2 class="form-subhead text-color-gray">{% translate "Origin" %}</h2>
                        </legend>
                        {% include 'forms/form_field.html' with field=form.vineyard %}
                        {% include 'forms/form_field.html' with field=form.source %}
                        {% include 'forms/form_field.html' with field=form.price %}
                        {% include 'forms/form_field.html' with field=form.barcode %}
                    </fieldset>
                    <fieldset id="create__fs_3" class="{% if step != 3 %}hidden{% endif %}">
                        <legend>
                            <h2 class="form-subhead text-color-gray">{% translate "Personal Notes" %}</h2>
                        </legend>
                        {% include 'forms/form_field.html' with field=form.drink_by %}
                        {% include 'forms/form_field.html' with field=form.stock %}
                        {% include 'forms/form_field.html' with field=form.food_pairings %}
                        {% include 'forms/form_field.html' with field=form.rating %}
                        {% include 'forms/form_field.html' with field=form.comment %}
                    </fieldset>
                    <fieldset id="create__fs_4" class="{% if step != 4 %}hidden{% endif %}">
                        <legend>
                            <h2 class="form-subhead text-color-gray">{% translate "Image" %}</h2>
                        </legend>
                        {% include 'forms/form_field.html' with field=form.image %}
                    </fieldset>
                    {{ form.form_step }}
                    <div class="pure-controls">
                        <div class="pure-g">
                            <div class="pure-u-1 pure-u-sm-1-2">
                                {% if step < 4 %}
                                    <button type="submit" name="continue" class="pure-button button__primary">{% translate "Continue" %}</button>
                                {% endif %}
                            </div>
                            <div id="save_button_container" class="pure-u-1 pure-u-sm-1-2">
                                <button type="submit"
                                        name="save_finish"
                                        class="pure-button button__secondary">
                                    {% translate "Save and Finish" %}
                                </button>
                            </div>
                        </div>
                    </div>
                {% endwith %}
            </form>
        </div>
    </div>
{% endblock content %}
